!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";n(1)},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),s=r(o),i=n(3),a=r(i),u=n(16),d=r(u),c=n(10),l=n(8),f=r(l),p=(0,f.default)('[data-remodal-id="wizard"]'),h=(0,f.default)('[data-remodal-id="reset-local"]'),y={github:"github.com",bitbucket:"bitbucket.org",gitlab:"gitlab.com",allothers:"allothers.repo"},m={REPO_URL:"https://{placeholder}/getgrav/grav.git"},v=function(){var e=p.remodal({closeOnConfirm:!1}),t=p.find('[data-gitsync-action="previous"]'),n=p.find('[data-gitsync-action="next"]'),r=p.find('[data-gitsync-action="save"]');b=0,p.find("form > [class^=step-]:not(.step-"+b+") > .panel").hide().removeClass("hidden"),p.find('form > [class="step-'+b+'"] > .panel').show(),n.removeClass("hidden"),t.addClass("hidden"),r.addClass("hidden"),(0,f.default)('[name="gitsync[repository]"]').trigger("change"),e.open()},b=0,g=0,w=null;(0,f.default)(document).on("closed",p,function(e){b=0}),(0,f.default)(document).on("click","[data-gitsync-useraction]",function(e){e.preventDefault();var t=(0,f.default)(e.target).closest("[data-gitsync-useraction]"),n=t.data("gitsyncUseraction"),r=c.config.current_url+".json";switch(n){case"wizard":v();break;case"sync":t.find("i").removeClass("fa-cloud").addClass("fa-circle-o-notch fa-spin"),(0,a.default)(r,{method:"post",body:{task:"synchronize"}},function(){t.find("i").removeClass("fa-circle-o-notch fa-spin").addClass("fa-cloud")});break;case"reset":var o=h.remodal({closeOnConfirm:!1});o.open(),h.data("_reset_event_set_")||h.find('[data-gitsync-action="reset-local"]').one("click",function(){o.close(),h.data("_reset_event_set_",!0),t.find("i").removeClass("fa-history").addClass("fa-circle-o-notch fa-spin"),(0,a.default)(r,{method:"post",body:{task:"resetlocal"}},function(){h.data("_reset_event_set_",!1),t.find("i").removeClass("fa-circle-o-notch fa-spin").addClass("fa-history")})})}}),(0,f.default)(document).on("click","[data-gitsync-action]",function(t){t.preventDefault();var n=(0,f.default)(t.target).closest("[data-gitsync-action]"),r=p.find('[data-gitsync-action="previous"]'),o=p.find('[data-gitsync-action="next"]'),s=p.find('[data-gitsync-action="save"]'),i=n.data("gitsyncAction"),u=(0,f.default)('[name="gitsync[repo_user]"]').val(),l=(0,f.default)('[name="gitsync[repo_password]"]').val(),h=(0,f.default)('[name="gitsync[repo_url]"]').val(),y=[];if(u||y.push("Username is missing."),h||y.push("Repository is missing."),["save","test"].includes(i)&&y.length)return d.default.error(y.join("<br />")),!1;if("save"===i){var m=(0,f.default)('[name="gitsync[folders]"]:checked').map(function(e,t){return t.value});(0,f.default)('[name="data[repository]"]').val(h),(0,f.default)('[name="data[user]"]').val(u),(0,f.default)('[name="data[password]"]').val(l);var v=(0,f.default)('[name="data[folders][]"]');return v&&v[0]&&v[0].selectize&&v[0].selectize.setValue(m.toArray()),(0,f.default)('[name="task"][value="save"]').trigger("click"),!1}if("test"===i){var w=c.config.current_url+".json",_=e.btoa(JSON.stringify({user:u,password:l,repository:h}));return(0,a.default)(w,{method:"post",body:{test:_,task:"testConnection"}}),!1}p.find(".step-"+b+" > .panel").slideUp(),b+="next"===i?1:-1,p.find(".step-"+b+" > .panel").slideDown(),s.addClass("hidden"),"next"===i&&r.removeClass("hidden"),b<=0&&r.addClass("hidden"),b>0&&o.removeClass("hidden"),b===g&&(o.addClass("hidden"),r.removeClass("hidden"),s.removeClass("hidden"))}),(0,f.default)(document).on("keyup",'[data-gitsync-uribase] [name="gitsync[webhook]"]',function(e){var t=(0,f.default)(e.currentTarget),n=t.val();(0,f.default)(".gitsync-webhook").text(n)}),(0,f.default)(document).on("change",'[name="gitsync[repository]"]',function(e){var t=(0,f.default)(e.target);w=t.val(),Object.keys(y).forEach(function(e){p.find(".hidden-step-"+e)[e===w?"removeClass":"addClass"]("hidden"),e===w&&p.find('input[name="gitsync[repo_url]"][placeholder]').attr("placeholder",m.REPO_URL.replace(/\{placeholder\}/,y[e]))})}),(0,f.default)(document).ready(function(){g=p.find('[class^="step-"]').length-1,p.wrapInner("<form></form>"),h.wrapInner("<form></form>"),!s.default.first_time&&s.default.git_installed||v()}),t.default=s.default}).call(t,function(){return this}())},function(e,t){e.exports=GitSync},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(10),s=void 0,i=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};if("function"==typeof n&&(i=n,n={}),n.method&&"post"===n.method){var a=new FormData;n.body=Object.assign({"admin-nonce":o.config.admin_nonce},n.body||{}),Object.keys(n.body).map(function(e){return a.append(e,n.body[e])}),n.body=a}return n=Object.assign({credentials:"same-origin",headers:{Accept:"application/json"}},n),e(t,n).then(function(e){return s=e,e}).then(r.parseStatus).then(r.parseJSON).then(r.userFeedback).then(function(e){return i(e,s)}).catch(r.userFeedbackError)};t.default=i}).call(t,n(4))},function(e,t){(function(t){(function(){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function i(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function a(e){var t=new FileReader,n=i(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=i(t);return t.readAsText(e),n}function d(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&g(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var n=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function y(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];this.map[e]=o?o+","+r:r},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=n(r)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},v.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},l.call(p.prototype),l.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var C=[301,302,303,307,308];m.redirect=function(e,t){if(C.indexOf(t)===-1)throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=p,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var o=new p(e,t),s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:y(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;n(new m(t,e))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.open(o.method,o.url,!0),"include"===o.credentials&&(s.withCredentials=!0),"responseType"in s&&v.blob&&(s.responseType="blob"),o.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),e.exports=t.fetch}).call(t)}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e}function s(e){return e.text().then(function(e){var t=e;try{t=JSON.parse(e)}catch(t){var n=document.createElement("div");n.innerHTML=e;var r=new Error;throw r.stack=(0,f.default)(n.innerText),r}return t})}function i(e){var t=e.status||(e.error?"error":""),n=e.message||(e.error?e.error.message:null),r=e.toastr||null,o=void 0;switch(t){case"unauthenticated":throw document.location.href=c.config.base_url_relative,p("Logged out");case"unauthorized":t="error",n=n||"Unauthorized.";break;case"error":t="error",n=n||"Unknown error.";break;case"success":t="success",n=n||"";break;default:t="error",n=n||"Invalid AJAX response."}return r&&(o=Object.assign({},d.default.options),Object.keys(r).forEach(function(e){d.default.options[e]=r[e]})),n&&d.default["success"===t?"success":"error"](n),r&&(d.default.options=o),e}function a(e){var t=e.stack?"<pre><code>"+e.stack+"</code></pre>":"";d.default.error("Fetch Failed: <br /> "+e.message+" "+t),console.error(e.message+" at "+e.stack)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseStatus=o,t.parseJSON=s,t.userFeedback=i,t.userFeedbackError=a;var u=n(6),d=r(u),c=n(10),l=n(11),f=r(l),p=function e(t){var e=new Error(t.statusText||t||"");return e.response=t,e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),s=r(o);s.default.options.positionClass="toast-top-right",s.default.options.preventDuplicates=!0,t.default=s.default},function(e,t,n){var r,o;!function(s){r=[n(8)],o=function(e){return function(){function t(e,t,n){return h({type:_.error,iconClass:y().iconClasses.error,message:e,optionsOverride:n,title:t})}function n(t,n){return t||(t=y()),v=e("#"+t.containerId),v.length?v:(n&&(v=l(t)),v)}function r(e,t,n){return h({type:_.info,iconClass:y().iconClasses.info,message:e,optionsOverride:n,title:t})}function o(e){b=e}function s(e,t,n){return h({type:_.success,iconClass:y().iconClasses.success,message:e,optionsOverride:n,title:t})}function i(e,t,n){return h({type:_.warning,iconClass:y().iconClasses.warning,message:e,optionsOverride:n,title:t})}function a(e,t){var r=y();v||n(r),c(e,r,t)||d(r)}function u(t){var r=y();return v||n(r),t&&0===e(":focus",t).length?void m(t):void(v.children().length&&v.remove())}function d(t){for(var n=v.children(),r=n.length-1;r>=0;r--)c(e(n[r]),t)}function c(t,n,r){var o=!(!r||!r.force)&&r.force;return!(!t||!o&&0!==e(":focus",t).length)&&(t[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){m(t)}}),!0)}function l(t){return v=e("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert"),v.appendTo(e(t.target)),v}function f(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function p(e){b&&b(e)}function h(t){function r(e){return null==e&&(e=""),new String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(){a(),d(),c(),l(),f(),u()}function s(){B.hover(C,_),!T.onclick&&T.tapToDismiss&&B.click(b),T.closeButton&&P&&P.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&e.cancelBubble!==!0&&(e.cancelBubble=!0),b(!0)}),T.onclick&&B.click(function(e){T.onclick(e),b()})}function i(){B.hide(),B[T.showMethod]({duration:T.showDuration,easing:T.showEasing,complete:T.onShown}),T.timeOut>0&&(E=setTimeout(b,T.timeOut),j.maxHideTime=parseFloat(T.timeOut),j.hideEta=(new Date).getTime()+j.maxHideTime,T.progressBar&&(j.intervalId=setInterval(x,10)))}function a(){t.iconClass&&B.addClass(T.toastClass).addClass(O)}function u(){T.newestOnTop?v.prepend(B):v.append(B)}function d(){t.title&&(k.append(T.escapeHtml?r(t.title):t.title).addClass(T.titleClass),B.append(k))}function c(){t.message&&(A.append(T.escapeHtml?r(t.message):t.message).addClass(T.messageClass),B.append(A))}function l(){T.closeButton&&(P.addClass("toast-close-button").attr("role","button"),B.prepend(P))}function f(){T.progressBar&&(D.addClass("toast-progress"),B.prepend(D))}function h(e,t){if(e.preventDuplicates){if(t.message===g)return!0;g=t.message}return!1}function b(t){var n=t&&T.closeMethod!==!1?T.closeMethod:T.hideMethod,r=t&&T.closeDuration!==!1?T.closeDuration:T.hideDuration,o=t&&T.closeEasing!==!1?T.closeEasing:T.hideEasing;if(!e(":focus",B).length||t)return clearTimeout(j.intervalId),B[n]({duration:r,easing:o,complete:function(){m(B),T.onHidden&&"hidden"!==U.state&&T.onHidden(),U.state="hidden",U.endTime=new Date,p(U)}})}function _(){(T.timeOut>0||T.extendedTimeOut>0)&&(E=setTimeout(b,T.extendedTimeOut),j.maxHideTime=parseFloat(T.extendedTimeOut),j.hideEta=(new Date).getTime()+j.maxHideTime)}function C(){clearTimeout(E),j.hideEta=0,B.stop(!0,!0)[T.showMethod]({duration:T.showDuration,easing:T.showEasing})}function x(){var e=(j.hideEta-(new Date).getTime())/j.maxHideTime*100;D.width(e+"%")}var T=y(),O=t.iconClass||T.iconClass;if("undefined"!=typeof t.optionsOverride&&(T=e.extend(T,t.optionsOverride),O=t.optionsOverride.iconClass||O),!h(T,t)){w++,v=n(T,!0);var E=null,B=e("<div/>"),k=e("<div/>"),A=e("<div/>"),D=e("<div/>"),P=e(T.closeHtml),j={intervalId:null,hideEta:null,maxHideTime:null},U={toastId:w,state:"visible",startTime:new Date,options:T,map:t};return o(),i(),s(),p(U),T.debug&&console&&console.log(U),B}}function y(){return e.extend({},f(),C.options)}function m(e){v||(v=n()),e.is(":visible")||(e.remove(),e=null,0===v.children().length&&(v.remove(),g=void 0))}var v,b,g,w=0,_={error:"error",info:"info",success:"success",warning:"warning"},C={clear:a,remove:u,error:t,getContainer:n,info:r,options:{},subscribe:o,success:s,version:"2.1.2",warning:i};return C}()}.apply(t,r),!(void 0!==o&&(e.exports=o))}(n(9))},function(e,t){e.exports=jQuery},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=GravAdmin},function(e,t,n){function r(e,t){return e=o(e),t=t||s,i(a(e,t),t)}var o=n(12),s=n(13),i=n(14),a=n(15);e.exports=r},function(e,t){function n(e){return null==e?"":e.toString()}e.exports=n},function(e,t){e.exports=[" ","\n","\r","\t","\f","\v"," "," ","᠎"," "," "," "," "," "," "," "," "," "," "," ","\u2028","\u2029"," "," ","　"]},function(e,t,n){function r(e,t){e=o(e),t=t||s;for(var n,r,i=0,a=e.length,u=t.length,d=!0;d&&i<a;)for(d=!1,n=-1,r=e.charAt(i);++n<u;)if(r===t[n]){d=!0,i++;break}return i>=a?"":e.substr(i,a)}var o=n(12),s=n(13);e.exports=r},function(e,t,n){function r(e,t){e=o(e),t=t||s;for(var n,r,i=e.length-1,a=t.length,u=!0;u&&i>=0;)for(u=!1,n=-1,r=e.charAt(i);++n<a;)if(r===t[n]){u=!0,i--;break}return i>=0?e.substring(0,i+1):""}var o=n(12),s=n(13);e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),s=r(o);s.default.options.positionClass="toast-top-right",s.default.options.preventDuplicates=!0,t.default=s.default}]);
//# sourceMappingURL=app.js.map